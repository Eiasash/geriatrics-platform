const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-jbJLqY9r.js","assets/firebase-BnSiId-0.js","assets/supabase-Bxebc_WO.js","assets/supabase-D23GQrQo.js","assets/react-vendor-BP9ApZiI.js","assets/firebase-C7biI5E4.js","assets/supabase-D6Gy2m-k.js"])))=>i.map(i=>d[i]);
var Ce=Object.defineProperty;var Ae=(i,s,n)=>s in i?Ce(i,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[s]=n;var G=(i,s,n)=>Ae(i,typeof s!="symbol"?s+"":s,n);import{r as d,b as De,B as Le,u as Re,L as Pe,d as Me,e as I,N as Ee,R as Te}from"./react-vendor-BP9ApZiI.js";import{_ as U}from"./supabase-D23GQrQo.js";import{U as ae,C as ie,a as Ie,A as ge,S as oe,P as Oe,b as fe,X as K,c as _e,T as Fe,R as re,D as Z,d as be,e as ce,H as je,f as F,B as He,g as Q,h as Ue,I as de,i as Be,F as ye,j as $e,k as We,l as Ke,m as ze,n as ve,o as Ve,M as Ge,p as Je,q as qe,r as Ye,s as Xe,t as Qe,u as Ze,v as es,L as ss,w as ts}from"./ui-utils-9ZtHZXoF.js";import{R as $,L as Ne,C as J,X as q,Y,T as W,a as X,b as ne,P as as,c as is,d as rs,A as ns,e as xe,B as ls,f as he}from"./charts-Cu53rPhx.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const b of l.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function n(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(t){if(t.ep)return;t.ep=!0;const l=n(t);fetch(t.href,l)}})();var we={exports:{}},ee={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os=d,cs=Symbol.for("react.element"),ds=Symbol.for("react.fragment"),ms=Object.prototype.hasOwnProperty,xs=os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hs={key:!0,ref:!0,__self:!0,__source:!0};function ke(i,s,n){var o,t={},l=null,b=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(b=s.ref);for(o in s)ms.call(s,o)&&!hs.hasOwnProperty(o)&&(t[o]=s[o]);if(i&&i.defaultProps)for(o in s=i.defaultProps,s)t[o]===void 0&&(t[o]=s[o]);return{$$typeof:cs,type:i,key:l,ref:b,props:t,_owner:xs.current}}ee.Fragment=ds;ee.jsx=ke;ee.jsxs=ke;we.exports=ee;var e=we.exports,le={},pe=De;le.createRoot=pe.createRoot,le.hydrateRoot=pe.hydrateRoot;async function ps(){switch("local"){case"firebase":const{FirebaseDataSource:s}=await U(async()=>{const{FirebaseDataSource:t}=await import("./firebase-jbJLqY9r.js");return{FirebaseDataSource:t}},__vite__mapDeps([0,1]));return new s;case"supabase":const{SupabaseDataSource:n}=await U(async()=>{const{SupabaseDataSource:t}=await import("./supabase-Bxebc_WO.js");return{SupabaseDataSource:t}},__vite__mapDeps([2,3,4]));return new n;default:const{LocalDataSource:o}=await U(async()=>{const{LocalDataSource:t}=await import("./local-tp9K4NZ3.js");return{LocalDataSource:t}},[]);return new o}}async function us(){switch("local"){case"firebase":const{FirebaseAuth:s}=await U(async()=>{const{FirebaseAuth:t}=await import("./firebase-C7biI5E4.js");return{FirebaseAuth:t}},__vite__mapDeps([5,1]));return new s;case"supabase":const{SupabaseAuth:n}=await U(async()=>{const{SupabaseAuth:t}=await import("./supabase-D6Gy2m-k.js");return{SupabaseAuth:t}},__vite__mapDeps([6,3,4]));return new n;default:const{LocalAuth:o}=await U(async()=>{const{LocalAuth:t}=await import("./local-rHg8iKqc.js");return{LocalAuth:t}},[]);return new o}}function gs({dataSource:i,language:s}){const[n,o]=d.useState([]),[t,l]=d.useState([]),[b,u]=d.useState(null),[h,p]=d.useState(!0);d.useEffect(()=>{x()},[]);const x=async()=>{try{const[c,r]=await Promise.all([i.getRoster(),i.getTasks()]);o(c),l(r),c.length>0&&u(c[0])}catch(c){console.error("Failed to load data:",c)}finally{p(!1)}},j=async c=>{await i.updateTask(c,{status:"completed"}),await x()},m=t.filter(c=>c.status==="pending"),v=t.filter(c=>c.status==="completed"),y=[{name:s==="en"?"Total Patients":"סה״כ מטופלים",value:n.length,icon:ae,color:"bg-blue-500"},{name:s==="en"?"Pending Tasks":"משימות ממתינות",value:m.length,icon:ie,color:"bg-yellow-500"},{name:s==="en"?"Completed Today":"הושלמו היום",value:v.length,icon:Ie,color:"bg-green-500"},{name:s==="en"?"Critical":"קריטי",value:m.filter(c=>c.priority==="high").length,icon:ge,color:"bg-red-500"}];return h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==="en"?"Dashboard":"לוח בקרה"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s==="en"?"Overview of patients and tasks":"סקירה של מטופלים ומשימות"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map(c=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${c.color} rounded-lg p-3`,children:e.jsx(c.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:s==="he"?"mr-4":"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:c.name}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.value})]})]})},c.name))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s==="en"?"MMSE Trends":"מגמות MMSE"}),e.jsx("select",{value:(b==null?void 0:b.id)||"",onChange:c=>{const r=n.find(w=>w.id===c.target.value);u(r||null)},className:"mt-2 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:n.map(c=>e.jsxs("option",{value:c.id,children:[c.name," - ",s==="en"?"Bed":"מיטה"," ",c.bed]},c.id))})]}),b&&b.mmse&&b.mmse.length>0?e.jsx($,{width:"100%",height:300,children:e.jsxs(Ne,{data:b.mmse,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"date"}),e.jsx(Y,{domain:[0,30]}),e.jsx(W,{}),e.jsx(X,{}),e.jsx(ne,{type:"monotone",dataKey:"score",stroke:"#3B82F6",name:s==="en"?"MMSE Score":"ציון MMSE",strokeWidth:2})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:s==="en"?"No MMSE data available":"אין נתוני MMSE זמינים"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"Pending Tasks":"משימות ממתינות"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.length>0?m.map(c=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx("button",{onClick:()=>j(c.id),className:"mt-1 flex-shrink-0",children:e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded hover:border-blue-500 transition-colors"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-gray-900",children:c.patientName}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c.priority==="high"?"bg-red-100 text-red-800":c.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:c.priority})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.description}),e.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),c.time,c.notes&&e.jsxs("span",{className:"ml-3",children:["• ",c.notes]})]})]})]},c.id)):e.jsx("p",{className:"text-gray-500 text-center py-8",children:s==="en"?"No pending tasks":"אין משימות ממתינות"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s==="en"?"Patient Roster":"רשימת מטופלים"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Name":"שם"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Age":"גיל"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Ward/Bed":"מחלקה/מיטה"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Latest MMSE":"MMSE אחרון"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Diagnoses":"אבחנות"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(c=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.age}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[c.ward," / ",c.bed]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.mmse&&c.mmse.length>0?c.mmse[c.mmse.length-1].score:"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.diagnoses.slice(0,2).map((r,w)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 rounded",children:r},w)),c.diagnoses.length>2&&e.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 rounded",children:["+",c.diagnoses.length-2]})]})})]},c.id))})]})})]})]})}function fs({dataSource:i,language:s}){const[n,o]=d.useState(""),[t,l]=d.useState({}),[b,u]=d.useState(""),[h,p]=d.useState(""),[x,j]=d.useState(null),[m,v]=d.useState(""),[y,c]=d.useState("");d.useEffect(()=>{r()},[s]);const r=async()=>{const N=s==="en"?"abbrev_en":"abbrev_he",S=await i.getPack(N);S&&S.abbreviations&&l(S.abbreviations)},w=async()=>{if(b&&h){const N={...t,[b]:h};l(N),u(""),p("");const S=s==="en"?"abbrev_en":"abbrev_he";await i.savePack(S,{abbreviations:N})}},D=async N=>{const S={...t};delete S[N],l(S);const M=s==="en"?"abbrev_en":"abbrev_he";await i.savePack(M,{abbreviations:S})},f=async N=>{if(m){const S={...t,[N]:m};l(S),j(null),v("");const M=s==="en"?"abbrev_en":"abbrev_he";await i.savePack(M,{abbreviations:S})}},k=N=>{let S=N;return Object.keys(t).sort((a,C)=>C.length-a.length).forEach(a=>{const C=new RegExp(`\\b${a}\\b`,"gi");S=S.replace(C,R=>`<mark class="bg-yellow-200 px-1 rounded cursor-help" title="${t[a]}">${R}</mark>`)}),S},L=Object.entries(t).filter(([N,S])=>N.toLowerCase().includes(y.toLowerCase())||S.toLowerCase().includes(y.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==="en"?"Clinical Note Analyzer":"מנתח הערות קליניות"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s==="en"?"Paste clinical notes to highlight and explain medical abbreviations":"הדבק הערות קליניות כדי להדגיש ולהסביר קיצורים רפואיים"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"Clinical Note":"הערה קלינית"}),e.jsx("textarea",{value:n,onChange:N=>o(N.target.value),placeholder:s==="en"?`Paste or type clinical note here...

Example: Patient with CHF and DM presents with SOB. BP 140/90, HR 88, SpO2 94%. Started on Lasix 40mg PO BID.`:`הדבק או הקלד הערה קלינית כאן...

דוגמה: מטופל עם אי״ס וסכ״ר מגיע עם קוצר נשימה. ל״ד 140/90, דופק 88, רו״ח 94%. התחיל לזיקס 40 מ״ג דר״פ פ״ב.`,className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"Analyzed Note":"הערה מנותחת"}),e.jsx("div",{className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-lg overflow-y-auto bg-gray-50",dangerouslySetInnerHTML:{__html:k(n)||`<span class="text-gray-400">${s==="en"?"Analyzed text will appear here...":"טקסט מנותח יופיע כאן..."}</span>`}})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s==="en"?"Abbreviations Dictionary":"מילון קיצורים"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:y,onChange:N=>c(N.target.value),placeholder:s==="en"?"Search...":"חיפוש...",className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})})]})}),e.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:b,onChange:N=>u(N.target.value.toUpperCase()),placeholder:s==="en"?"Abbreviation":"קיצור",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"text",value:h,onChange:N=>p(N.target.value),placeholder:s==="en"?"Definition":"הגדרה",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e.jsx(Oe,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Abbreviation":"קיצור"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Definition":"הגדרה"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s==="en"?"Actions":"פעולות"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(([N,S])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:x===N?e.jsx("input",{type:"text",value:m,onChange:M=>v(M.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded",autoFocus:!0}):S}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:x===N?e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>f(N),className:"text-green-600 hover:text-green-900",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{j(null),v("")},className:"text-gray-600 hover:text-gray-900",children:e.jsx(K,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{j(N),v(S)},className:"text-blue-600 hover:text-blue-900",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(N),className:"text-red-600 hover:text-red-900",children:e.jsx(Fe,{className:"h-4 w-4"})})]})})]},N))})]})})]})]})}function bs({dataSource:i,language:s}){const[n,o]=d.useState(!1),[t,l]=d.useState({}),b=[{id:"abbrev_en",name:s==="en"?"English Abbreviations":"קיצורים באנגלית",file:"/packs/abbreviations.en.json",description:s==="en"?"Medical abbreviations dictionary":"מילון קיצורים רפואיים"},{id:"abbrev_he",name:s==="en"?"Hebrew Abbreviations":"קיצורים בעברית",file:"/packs/abbreviations.he.json",description:s==="en"?"Hebrew medical abbreviations":"קיצורים רפואיים בעברית"},{id:"flashcards",name:s==="en"?"MMSE Flashcards":"כרטיסיות MMSE",file:"/packs/flashcards_mmse.json",description:s==="en"?"Study cards for MMSE assessment":"כרטיסי לימוד להערכת MMSE"},{id:"checklist_frail",name:s==="en"?"FRAIL Checklist":"רשימת בדיקה FRAIL",file:"/packs/checklist_frail.json",description:s==="en"?"Frailty assessment checklist":"רשימת בדיקה להערכת שבריריות"},{id:"roster",name:s==="en"?"Sample Roster":"רשימת מטופלים לדוגמה",file:"/packs/roster.json",description:s==="en"?"Example patient roster with MMSE data":"רשימת מטופלים לדוגמה עם נתוני MMSE"},{id:"tasks",name:s==="en"?"Sample Tasks":"משימות לדוגמה",file:"/packs/tasks.json",description:s==="en"?"Example clinical tasks":"משימות קליניות לדוגמה"}],u=async x=>{l(j=>({...j,[x.id]:"importing"}));try{const m=await(await fetch(x.file)).json();if(x.id==="roster"){if((await i.getRoster()).length===0&&m.patients)for(const y of m.patients)await i.addPatient(y)}else if(x.id==="tasks"){if((await i.getTasks()).length===0&&m.tasks)for(const y of m.tasks)await i.addTask(y)}else await i.savePack(x.id,m);l(v=>({...v,[x.id]:"done"}))}catch(j){console.error(`Failed to import ${x.id}:`,j),l(m=>({...m,[x.id]:"error"}))}},h=async()=>{o(!0);for(const x of b)await u(x);o(!1)},p=async()=>{const x={roster:await i.getRoster(),tasks:await i.getTasks(),packs:{}};for(const y of b)if(!["roster","tasks"].includes(y.id)){const c=await i.getPack(y.id);c&&(x.packs[y.id]=c)}const j=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),m=URL.createObjectURL(j),v=document.createElement("a");v.href=m,v.download=`geriatrics-export-${new Date().toISOString().split("T")[0]}.json`,v.click(),URL.revokeObjectURL(m)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==="en"?"Data Packs Manager":"מנהל חבילות נתונים"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s==="en"?"Import seed data and manage content packs":"ייבוא נתוני זרע וניהול חבילות תוכן"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:h,disabled:n,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(re,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),s==="en"?"Import All Packs":"ייבא את כל החבילות"]}),e.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),s==="en"?"Export All Data":"ייצא את כל הנתונים"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(x=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx(be,{className:"h-8 w-8 text-blue-600"}),t[x.id]==="done"&&e.jsx(fe,{className:"h-5 w-5 text-green-500"}),t[x.id]==="importing"&&e.jsx(re,{className:"h-5 w-5 text-blue-500 animate-spin"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x.description}),e.jsx("button",{onClick:()=>u(x),disabled:t[x.id]==="importing",className:"w-full px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:t[x.id]==="importing"?s==="en"?"Importing...":"מייבא...":t[x.id]==="done"?s==="en"?"Re-import":"ייבא מחדש":s==="en"?"Import":"ייבא"})]},x.id))}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:s==="en"?"About Data Packs":"אודות חבילות נתונים"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:s==="en"?"• Packs are automatically imported on first load":"• חבילות מיובאות אוטומטית בטעינה ראשונה"}),e.jsx("li",{children:s==="en"?"• Re-import to reset data to original state":"• ייבא מחדש כדי לאפס נתונים למצב המקורי"}),e.jsx("li",{children:s==="en"?"• Export to backup your current data":"• ייצא כדי לגבות את הנתונים הנוכחיים"}),e.jsx("li",{children:s==="en"?"• Data persists based on your backend configuration":"• נתונים נשמרים בהתאם להגדרות הbackend שלך"})]})]})]})}function ue({language:i,onToggle:s}){return e.jsxs("button",{onClick:()=>s(i==="en"?"he":"en"),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("span",{className:"mr-2",children:"🌐"}),i==="en"?"EN":"עב"]})}function js(i){return i.reduce((s,n)=>s+n,0)}function ys({language:i}){var c;const[s,n]=d.useState("frail"),[o,t]=d.useState(null),[l,b]=d.useState({fatigue:!1,resistance:!1,ambulation:!1,illnesses:!1,weightLoss:!1}),[u,h]=d.useState({age:65,sex:"male",chf:!1,hypertension:!1,stroke:!1,vascular:!1,diabetes:!1}),[p,x]=d.useState({fallHistory:!1,secondaryDiagnosis:!1,ambulatoryAid:"none",ivTherapy:!1,gaitTransfer:"normal",mentalStatus:"oriented"}),j=[{id:"frail",name:"FRAIL Scale",icon:ce},{id:"cha2ds2",name:"CHA2DS2-VASc",icon:je},{id:"morse",name:"Morse Fall Scale",icon:F},{id:"mmse",name:"MMSE",icon:He},{id:"acb",name:"ACB Calculator",icon:Q},{id:"beers",name:"Beers Criteria",icon:Q}],m=()=>{const r=[l.fatigue?1:0,l.resistance?1:0,l.ambulation?1:0,l.illnesses?1:0,l.weightLoss?1:0],w=js(r),D=w>=3?"Frail":w>=1?"Pre-frail":"Robust";t({score:w,interpretation:D})},v=()=>{let r=0;u.age>=75?r+=2:u.age>=65&&(r+=1),u.sex==="female"&&(r+=1),u.chf&&(r+=1),u.hypertension&&(r+=1),u.stroke&&(r+=2),u.vascular&&(r+=1),u.diabetes&&(r+=1);const w=r>=2?"High stroke risk":r===1?"Moderate risk":"Low risk";t({score:r,interpretation:w})},y=()=>{let r=0;p.fallHistory&&(r+=25),p.secondaryDiagnosis&&(r+=15),p.ambulatoryAid==="crutches"&&(r+=15),p.ambulatoryAid==="furniture"&&(r+=30),p.ivTherapy&&(r+=20),p.gaitTransfer==="weak"&&(r+=10),p.gaitTransfer==="impaired"&&(r+=20),p.mentalStatus==="overestimates"&&(r+=15);const w=r>=45?"High fall risk":r>=25?"Moderate fall risk":"Low fall risk";t({score:r,interpretation:w})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i==="en"?"Clinical Calculators":"מחשבונים קליניים"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:i==="en"?"Evidence-based geriatric assessment tools":"כלי הערכה גריאטריים מבוססי ראיות"})]}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:j.map(r=>e.jsxs("button",{onClick:()=>{n(r.id),t(null)},className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${s===r.id?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(r.icon,{className:"h-4 w-4 mr-2"}),r.name]},r.id))}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s==="frail"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"FRAIL Scale"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.fatigue,onChange:r=>b({...l,fatigue:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Fatigue: Are you fatigued most/all of the time?"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.resistance,onChange:r=>b({...l,resistance:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Resistance: Unable to walk up one flight of stairs?"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.ambulation,onChange:r=>b({...l,ambulation:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Ambulation: Unable to walk one block?"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.illnesses,onChange:r=>b({...l,illnesses:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Illnesses: More than 5 illnesses?"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.weightLoss,onChange:r=>b({...l,weightLoss:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Loss of weight: >5% in past 6 months?"})]})]}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Calculate"})]}),s==="cha2ds2"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"CHA2DS2-VASc Score"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Age"}),e.jsx("input",{type:"number",value:u.age,onChange:r=>h({...u,age:parseInt(r.target.value)}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sex"}),e.jsxs("select",{value:u.sex,onChange:r=>h({...u,sex:r.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.chf,onChange:r=>h({...u,chf:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Congestive Heart Failure"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.hypertension,onChange:r=>h({...u,hypertension:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Hypertension"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.stroke,onChange:r=>h({...u,stroke:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Stroke/TIA/Thromboembolism"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.vascular,onChange:r=>h({...u,vascular:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Vascular Disease"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.diabetes,onChange:r=>h({...u,diabetes:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Diabetes"})]})]}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Calculate"})]}),s==="morse"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Morse Fall Scale"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.fallHistory,onChange:r=>x({...p,fallHistory:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"History of falling"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.secondaryDiagnosis,onChange:r=>x({...p,secondaryDiagnosis:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"Secondary diagnosis"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.ivTherapy,onChange:r=>x({...p,ivTherapy:r.target.checked}),className:"mr-3"}),e.jsx("span",{children:"IV therapy/Heparin lock"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ambulatory aid"}),e.jsxs("select",{value:p.ambulatoryAid,onChange:r=>x({...p,ambulatoryAid:r.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"none",children:"None/Bed rest/Wheelchair/Nurse"}),e.jsx("option",{value:"crutches",children:"Crutches/Cane/Walker"}),e.jsx("option",{value:"furniture",children:"Furniture"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gait/Transfer"}),e.jsxs("select",{value:p.gaitTransfer,onChange:r=>x({...p,gaitTransfer:r.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"normal",children:"Normal/Bed rest/Immobile"}),e.jsx("option",{value:"weak",children:"Weak"}),e.jsx("option",{value:"impaired",children:"Impaired"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mental status"}),e.jsxs("select",{value:p.mentalStatus,onChange:r=>x({...p,mentalStatus:r.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"oriented",children:"Oriented to own ability"}),e.jsx("option",{value:"overestimates",children:"Overestimates/Forgets limitations"})]})]})]}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Calculate"})]}),(s==="mmse"||s==="acb"||s==="beers")&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{className:"text-lg font-medium mb-2",children:(c=j.find(r=>r.id===s))==null?void 0:c.name}),e.jsx("p",{children:"Full implementation available in the domain modules"}),e.jsx("p",{className:"text-sm mt-2",children:"Connect to patient context for automated calculations"})]}),o&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Results"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Score: ",o.score]}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:o.interpretation})]})]})]})}function vs({authProvider:i}){const[s,n]=d.useState(!1),[o,t]=d.useState(""),[l,b]=d.useState(""),[u,h]=d.useState(""),[p,x]=d.useState(""),[j,m]=d.useState(!1),v=async y=>{y.preventDefault(),x(""),m(!0);try{s?await i.signUp(o,l,u):await i.signIn(o,l)}catch(c){x(c.message||"Authentication failed")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:s?"Create your account":"Sign in to your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:[s?"Already have an account?":"Don't have an account?"," ",e.jsx("button",{type:"button",onClick:()=>{n(!s),x("")},className:"font-medium text-blue-600 hover:text-blue-500",children:s?"Sign in":"Sign up"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"sr-only",children:"Name"}),e.jsx("input",{id:"name",name:"name",type:"text",required:s,value:u,onChange:y=>h(y.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:y=>t(y.target.value),className:`appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 ${s?"":"rounded-t-md"} focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`,placeholder:"Email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l,onChange:y=>b(y.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),p&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("p",{className:"text-sm text-red-800",children:p})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:j,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:j?"Processing...":s?"Sign up":"Sign in"})}),!s&&e.jsx("div",{className:"text-sm text-center text-gray-600",children:e.jsx("p",{children:"Demo: Use any email/password for local auth"})})]})]})})}function Ns(){const[i,s]=d.useState(null),[n,o]=d.useState(!1),[t,l]=d.useState(!1),[b,u]=d.useState(!1);d.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){l(!0);return}const x=/iPad|iPhone|iPod/.test(navigator.userAgent);u(x);const j=m=>{m.preventDefault(),s(m),localStorage.getItem("pwa_visited")?setTimeout(()=>o(!0),2e3):(localStorage.setItem("pwa_visited","true"),setTimeout(()=>o(!0),3e4))};return window.addEventListener("beforeinstallprompt",j),window.addEventListener("appinstalled",()=>{l(!0),o(!1)}),()=>{window.removeEventListener("beforeinstallprompt",j)}},[]);const h=async()=>{if(i)try{await i.prompt();const{outcome:x}=await i.userChoice;x==="accepted"&&(console.log("User accepted the install prompt"),o(!1)),s(null)}catch(x){console.error("Error installing PWA:",x)}},p=()=>{o(!1),localStorage.setItem("pwa_dismissed",Date.now().toString())};return d.useEffect(()=>{const x=localStorage.getItem("pwa_dismissed");x&&(Date.now()-parseInt(x))/864e5<7&&o(!1)},[]),t||!n?null:b?e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white rounded-lg shadow-xl border border-gray-200 p-4 z-50 animate-slide-up",children:[e.jsx("button",{onClick:p,className:"absolute top-2 right-2 p-1 hover:bg-gray-100 rounded-full","aria-label":"Dismiss",children:e.jsx(K,{className:"h-4 w-4 text-gray-500"})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ue,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Install Geriatrics Pro"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:'To install on iOS: Tap the share button and select "Add to Home Screen"'}),e.jsx("button",{onClick:p,className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Got it"})]})]})]}):e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white rounded-lg shadow-xl border border-gray-200 p-4 z-50 animate-slide-up",children:[e.jsx("button",{onClick:p,className:"absolute top-2 right-2 p-1 hover:bg-gray-100 rounded-full","aria-label":"Dismiss",children:e.jsx(K,{className:"h-4 w-4 text-gray-500"})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Z,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Install Geriatrics Pro"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Install our app for offline access, faster loading, and a better experience"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:h,className:"px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Install Now"}),e.jsx("button",{onClick:p,className:"px-3 py-1.5 text-gray-600 text-xs font-medium hover:text-gray-800 transition-colors",children:"Not Now"})]})]})]})]})}const ws={cardiovascular:"לב וכלי דם",analgesics:"משככי כאבים",antibiotics:"אנטיביוטיקה",psychiatric:"פסיכיאטריה",diabetes:"סוכרת",gastrointestinal:"מערכת העיכול",respiratory:"מערכת הנשימה",anticoagulants:"נוגדי קרישה"},ks=[{id:"amlodipine",nameHe:"אמלודיפין",nameEn:"Amlodipine",brand:"נורבסק",category:"cardiovascular",dosages:["2.5mg","5mg","10mg"],commonUse:"יתר לחץ דם, אנגינה",geriatricConsiderations:"התחל במינון נמוך 2.5mg, עלול לגרום לבצקות",interactions:["גרייפפרוט","סימבסטטין"],beersListWarning:!1},{id:"warfarin",nameHe:"וורפרין",nameEn:"Warfarin",brand:"קומדין",category:"anticoagulants",dosages:["1mg","2mg","3mg","5mg","10mg"],commonUse:"מניעת קרישי דם, פרפור פרוזדורים",geriatricConsiderations:"דורש ניטור INR תכוף, סיכון מוגבר לדימום",interactions:["אספירין","אנטיביוטיקה","ירקות ירוקים"],beersListWarning:!0,beersReason:"סיכון מוגבר לדימום בקשישים"},{id:"metformin",nameHe:"מטפורמין",nameEn:"Metformin",brand:"גלוקומין",category:"diabetes",dosages:["500mg","850mg","1000mg"],commonUse:"סוכרת סוג 2",geriatricConsiderations:"התאם מינון לתפקוד כלייתי, הפסק בGFR<30",interactions:["חומר ניגוד יודי"],beersListWarning:!1},{id:"omeprazole",nameHe:"אומפרזול",nameEn:"Omeprazole",brand:"לוסק",category:"gastrointestinal",dosages:["20mg","40mg"],commonUse:"ריפלוקס, כיב פפטי",geriatricConsiderations:"הגבל שימוש ל-8 שבועות, סיכון לזיהומים וחסרים תזונתיים",interactions:["קלופידוגרל","ברזל"],beersListWarning:!0,beersReason:"סיכון מוגבר ל-C.diff, שברים, חסר B12"},{id:"lorazepam",nameHe:"לורזפאם",nameEn:"Lorazepam",brand:"לוריבן",category:"psychiatric",dosages:["0.5mg","1mg","2mg"],commonUse:"חרדה, נדודי שינה",geriatricConsiderations:"הימנע בקשישים, סיכון לנפילות ובלבול",interactions:["אלכוהול","אופיאטים"],beersListWarning:!0,beersReason:"סיכון מוגבר לירידה קוגניטיבית, נפילות, תלות"},{id:"furosemide",nameHe:"פורוסמיד",nameEn:"Furosemide",brand:"פוסיד",category:"cardiovascular",dosages:["20mg","40mg","80mg"],commonUse:"אי ספיקת לב, בצקות",geriatricConsiderations:"עקוב אחר אלקטרוליטים, סיכון להתייבשות",interactions:["NSAIDs","ליתיום"],beersListWarning:!1},{id:"paracetamol",nameHe:"פרצטמול",nameEn:"Paracetamol",brand:"אקמול",category:"analgesics",dosages:["500mg","1000mg"],commonUse:"כאב, חום",geriatricConsiderations:"מועדף לכאב כרוני, מקסימום 3g ליום",interactions:["וורפרין בשימוש ממושך"],beersListWarning:!1},{id:"citalopram",nameHe:"ציטלופרם",nameEn:"Citalopram",brand:"ציפרמיל",category:"psychiatric",dosages:["10mg","20mg","40mg"],commonUse:"דיכאון, חרדה",geriatricConsiderations:"מקסימום 20mg בקשישים, סיכון להארכת QT",interactions:["MAOIs","טרמדול"],beersListWarning:!0,beersReason:"סיכון להיפונתרמיה, נפילות"},{id:"simvastatin",nameHe:"סימבסטטין",nameEn:"Simvastatin",brand:"סימבקור",category:"cardiovascular",dosages:["10mg","20mg","40mg","80mg"],commonUse:"הורדת כולסטרול",geriatricConsiderations:"הימנע ממינון 80mg, סיכון למיופתיה",interactions:["גרייפפרוט","אמיודרון"],beersListWarning:!1},{id:"amoxicillin",nameHe:"אמוקסיצילין",nameEn:"Amoxicillin",brand:"מוקסיפן",category:"antibiotics",dosages:["250mg","500mg","875mg"],commonUse:"זיהומים בקטריאליים",geriatricConsiderations:"התאם מינון לתפקוד כלייתי",interactions:["וורפרין","מטוטרקסט"],beersListWarning:!1},{id:"bisoprolol",nameHe:"ביסופרולול",nameEn:"Bisoprolol",brand:"קונקור",category:"cardiovascular",dosages:["1.25mg","2.5mg","5mg","10mg"],commonUse:"יתר לחץ דם, אי ספיקת לב",geriatricConsiderations:"התחל במינון נמוך, עקוב אחר דופק",interactions:["ורפמיל","דילטיאזם"],beersListWarning:!1},{id:"digoxin",nameHe:"דיגוקסין",nameEn:"Digoxin",brand:"לנוקסין",category:"cardiovascular",dosages:["0.125mg","0.25mg"],commonUse:"פרפור פרוזדורים, אי ספיקת לב",geriatricConsiderations:"הפחת מינון בקשישים, עקוב אחר רמות",interactions:["אמיודרון","ורפמיל"],beersListWarning:!0,beersReason:"סיכון לרעילות בקשישים"}],H={categories:ws,medications:ks};function Ss({language:i}){const[s,n]=d.useState(""),[o,t]=d.useState("all"),[l,b]=d.useState(null),[u,h]=d.useState(!1),[p,x]=d.useState(H.medications);d.useEffect(()=>{let m=H.medications;if(o!=="all"&&(m=m.filter(v=>v.category===o)),u&&(m=m.filter(v=>v.beersListWarning)),s){const v=s.toLowerCase();m=m.filter(y=>y.nameHe.includes(s)||y.nameEn.toLowerCase().includes(v)||y.brand.includes(s)||y.commonUse.includes(s))}x(m)},[s,o,u]);const j=m=>i==="he"?H.categories[m]:m;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i==="en"?"Medication Database":"מאגר תרופות"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:i==="en"?"Geriatric medication reference with Beers Criteria warnings":"מדריך תרופות גריאטרי עם התראות Beers Criteria"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:s,onChange:m=>n(m.target.value),placeholder:i==="en"?"Search medications...":"חפש תרופה...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",dir:i==="he"?"rtl":"ltr"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:o,onChange:m=>t(m.target.value),className:"px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"all",children:i==="en"?"All Categories":"כל הקטגוריות"}),Object.entries(H.categories).map(([m,v])=>e.jsx("option",{value:m,children:i==="he"?v:m},m))]}),e.jsxs("button",{onClick:()=>h(!u),className:`flex items-center px-3 py-2 rounded-lg font-medium transition-colors ${u?"bg-orange-100 text-orange-700 border border-orange-300":"bg-white text-gray-700 border"}`,children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),i==="en"?"Beers List Only":"רק Beers List"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:i==="en"?`Showing ${p.length} of ${H.medications.length} medications`:`מציג ${p.length} מתוך ${H.medications.length} תרופות`})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(m=>e.jsxs("div",{onClick:()=>b(m),className:"bg-white rounded-lg shadow p-4 cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:i==="he"?m.nameHe:m.nameEn}),e.jsx("p",{className:"text-sm text-gray-600",children:m.brand})]}),m.beersListWarning&&e.jsx(F,{className:"h-5 w-5 text-orange-500 flex-shrink-0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:j(m.category)}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:m.commonUse}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[m.dosages.slice(0,3).map(v=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-xs rounded",children:v},v)),m.dosages.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-xs rounded",children:["+",m.dosages.length-3]})]})]})]},m.id))}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:i==="he"?l.nameHe:l.nameEn}),e.jsx("button",{onClick:()=>b(null),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(K,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:i==="en"?"Brand Name":"שם מסחרי"}),e.jsx("p",{className:"text-gray-900",children:l.brand})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:i==="en"?"Category":"קטגוריה"}),e.jsx("p",{className:"text-gray-900",children:j(l.category)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:i==="en"?"Available Dosages":"מינונים זמינים"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:l.dosages.map(m=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:m},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:i==="en"?"Common Use":"שימוש נפוץ"}),e.jsx("p",{className:"text-gray-900 mt-1",children:l.commonUse})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(de,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("h3",{className:"font-medium text-blue-900",children:i==="en"?"Geriatric Considerations":"שיקולים גריאטריים"})]}),e.jsx("p",{className:"text-blue-800",children:l.geriatricConsiderations})]}),l.beersListWarning&&e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(F,{className:"h-5 w-5 text-orange-600 mr-2"}),e.jsx("h3",{className:"font-medium text-orange-900",children:i==="en"?"Beers Criteria Warning":"אזהרת Beers Criteria"})]}),e.jsx("p",{className:"text-orange-800",children:l.beersReason})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:i==="en"?"Known Interactions":"אינטראקציות ידועות"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:l.interactions.map(m=>e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:m},m))})]})]})]})})]})}function Cs({dataSource:i,language:s}){var w,D,f,k,L,N,S,M;const[n,o]=d.useState([]),[t,l]=d.useState({shiftType:"morning",date:new Date().toISOString().split("T")[0],criticalPatients:[],newAdmissions:[],discharges:[],medicationChanges:[],fallRisk:[],behavioralConcerns:[],pendingTests:[],generalNotes:""}),[b,u]=d.useState(!1),[h,p]=d.useState([]);d.useEffect(()=>{x(),j()},[i]);const x=async()=>{const a=await i.getRoster();o(a);const C=a.filter(g=>g.acuity==="critical"),R=a.filter(g=>g.fallRisk&&g.fallRisk>45);l(g=>({...g,criticalPatients:C,fallRisk:R}))},j=()=>{const a=localStorage.getItem("handoff_reports");a&&p(JSON.parse(a))},m=()=>{const C=[{...t,id:Date.now().toString(),createdAt:new Date().toISOString()},...h].slice(0,30);p(C),localStorage.setItem("handoff_reports",JSON.stringify(C)),alert(s==="en"?"Report saved successfully!":"הדוח נשמר בהצלחה!")},v=()=>{u(!0)},y=()=>{window.print()},c=(a,C)=>{const R=n.find(g=>g.id===C);R&&l(g=>({...g,[a]:[...g[a]||[],R]}))},r=(a,C)=>{l(R=>({...R,[a]:(R[a]||[]).filter(g=>g.id!==C)}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==="en"?"Shift Handoff Report":"דוח העברת משמרת"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s==="en"?"Comprehensive shift change documentation":"תיעוד מקיף להעברת משמרת"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s==="en"?"Shift Type":"סוג משמרת"}),e.jsxs("select",{value:t.shiftType,onChange:a=>l({...t,shiftType:a.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"morning",children:s==="en"?"Morning (7:00-15:00)":"בוקר (7:00-15:00)"}),e.jsx("option",{value:"evening",children:s==="en"?"Evening (15:00-23:00)":"ערב (15:00-23:00)"}),e.jsx("option",{value:"night",children:s==="en"?"Night (23:00-7:00)":"לילה (23:00-7:00)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s==="en"?"Date":"תאריך"}),e.jsx("input",{type:"date",value:t.date,onChange:a=>l({...t,date:a.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s==="en"?"Outgoing Nurse":"אחות יוצאת"}),e.jsx("input",{type:"text",value:t.nurseOut||"",onChange:a=>l({...t,nurseOut:a.target.value}),placeholder:s==="en"?"Enter name":"הכנס שם",className:"w-full px-3 py-2 border rounded-lg"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("h2",{className:"font-semibold text-gray-900",children:s==="en"?"Critical Patients":"חולים קריטיים"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:((w=t.criticalPatients)==null?void 0:w.length)||0})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(D=t.criticalPatients)==null?void 0:D.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Room ",a.room||a.bed]})]}),e.jsx("button",{onClick:()=>r("criticalPatients",a.id),className:"text-red-600 hover:text-red-800",children:"×"})]},a.id))}),e.jsxs("select",{onChange:a=>{a.target.value&&(c("criticalPatients",a.target.value),a.target.value="")},className:"mt-2 w-full px-2 py-1 border rounded text-sm",children:[e.jsx("option",{value:"",children:s==="en"?"Add patient...":"הוסף חולה..."}),n.filter(a=>{var C;return!((C=t.criticalPatients)!=null&&C.find(R=>R.id===a.id))}).map(a=>e.jsxs("option",{value:a.id,children:[a.name," - Room ",a.room||a.bed]},a.id))]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"h-5 w-5 text-orange-500 mr-2"}),e.jsx("h2",{className:"font-semibold text-gray-900",children:s==="en"?"High Fall Risk":"סיכון נפילה גבוה"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:((f=t.fallRisk)==null?void 0:f.length)||0})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(k=t.fallRisk)==null?void 0:k.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Score: ",a.fallRisk||"N/A"]})]}),e.jsx("button",{onClick:()=>r("fallRisk",a.id),className:"text-orange-600 hover:text-orange-800",children:"×"})]},a.id))}),e.jsxs("select",{onChange:a=>{a.target.value&&(c("fallRisk",a.target.value),a.target.value="")},className:"mt-2 w-full px-2 py-1 border rounded text-sm",children:[e.jsx("option",{value:"",children:s==="en"?"Add patient...":"הוסף חולה..."}),n.filter(a=>{var C;return!((C=t.fallRisk)!=null&&C.find(R=>R.id===a.id))}).map(a=>e.jsxs("option",{value:a.id,children:[a.name," - Room ",a.room||a.bed]},a.id))]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsx("h2",{className:"font-semibold text-gray-900",children:s==="en"?"Medication Changes":"שינויי תרופות"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:((L=t.medicationChanges)==null?void 0:L.length)||0})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(N=t.medicationChanges)==null?void 0:N.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Room ",a.room||a.bed]})]}),e.jsx("button",{onClick:()=>r("medicationChanges",a.id),className:"text-blue-600 hover:text-blue-800",children:"×"})]},a.id))}),e.jsxs("select",{onChange:a=>{a.target.value&&(c("medicationChanges",a.target.value),a.target.value="")},className:"mt-2 w-full px-2 py-1 border rounded text-sm",children:[e.jsx("option",{value:"",children:s==="en"?"Add patient...":"הוסף חולה..."}),n.filter(a=>{var C;return!((C=t.medicationChanges)!=null&&C.find(R=>R.id===a.id))}).map(a=>e.jsxs("option",{value:a.id,children:[a.name," - Room ",a.room||a.bed]},a.id))]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("h2",{className:"font-semibold text-gray-900",children:s==="en"?"New Admissions":"קבלות חדשות"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:((S=t.newAdmissions)==null?void 0:S.length)||0})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(M=t.newAdmissions)==null?void 0:M.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Room ",a.room||a.bed]})]}),e.jsx("button",{onClick:()=>r("newAdmissions",a.id),className:"text-green-600 hover:text-green-800",children:"×"})]},a.id))}),e.jsxs("select",{onChange:a=>{a.target.value&&(c("newAdmissions",a.target.value),a.target.value="")},className:"mt-2 w-full px-2 py-1 border rounded text-sm",children:[e.jsx("option",{value:"",children:s==="en"?"Add patient...":"הוסף חולה..."}),n.filter(a=>{var C;return!((C=t.newAdmissions)!=null&&C.find(R=>R.id===a.id))}).map(a=>e.jsxs("option",{value:a.id,children:[a.name," - Room ",a.room||a.bed]},a.id))]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h2",{className:"font-semibold text-gray-900 mb-2",children:s==="en"?"General Notes":"הערות כלליות"}),e.jsx("textarea",{value:t.generalNotes,onChange:a=>l({...t,generalNotes:a.target.value}),placeholder:s==="en"?"Add any additional notes for the incoming shift...":"הוסף הערות נוספות למשמרת הנכנסת...",className:"w-full px-3 py-2 border rounded-lg",rows:4})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("button",{onClick:v,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),s==="en"?"Preview Report":"תצוגה מקדימה"]}),e.jsxs("button",{onClick:m,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),s==="en"?"Save Report":"שמור דוח"]}),e.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),s==="en"?"Print":"הדפס"]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto print:max-h-none",children:e.jsxs("div",{className:"p-6 print:p-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[e.jsx("h2",{className:"text-xl font-bold",children:s==="en"?"Handoff Report Preview":"תצוגת דוח העברת משמרת"}),e.jsx("button",{onClick:()=>u(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:"×"})]}),e.jsxs("div",{className:"space-y-6 print:text-black",children:[e.jsxs("div",{className:"text-center border-b pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s==="en"?"Shift Handoff Report":"דוח העברת משמרת"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[t.date," - ",t.shiftType," Shift"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s==="en"?"Nurse":"אחות",": ",t.nurseOut||"N/A"]})]}),t.criticalPatients&&t.criticalPatients.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-red-600 mb-2",children:["Critical Patients (",t.criticalPatients.length,")"]}),e.jsx("ul",{className:"space-y-1",children:t.criticalPatients.map(a=>e.jsxs("li",{children:["• ",a.name," - Room ",a.room||a.bed]},a.id))})]}),t.fallRisk&&t.fallRisk.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-orange-600 mb-2",children:["High Fall Risk (",t.fallRisk.length,")"]}),e.jsx("ul",{className:"space-y-1",children:t.fallRisk.map(a=>e.jsxs("li",{children:["• ",a.name," - Room ",a.room," (Score: ",a.fallRisk,")"]},a.id))})]}),t.medicationChanges&&t.medicationChanges.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-blue-600 mb-2",children:["Medication Changes (",t.medicationChanges.length,")"]}),e.jsx("ul",{className:"space-y-1",children:t.medicationChanges.map(a=>e.jsxs("li",{children:["• ",a.name," - Room ",a.room||a.bed]},a.id))})]}),t.newAdmissions&&t.newAdmissions.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-green-600 mb-2",children:["New Admissions (",t.newAdmissions.length,")"]}),e.jsx("ul",{className:"space-y-1",children:t.newAdmissions.map(a=>e.jsxs("li",{children:["• ",a.name," - Room ",a.room||a.bed]},a.id))})]}),t.generalNotes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2",children:"General Notes"}),e.jsx("p",{className:"whitespace-pre-wrap",children:t.generalNotes})]}),e.jsxs("div",{className:"border-t pt-4 text-sm text-gray-500",children:[e.jsxs("p",{children:["Generated: ",new Date().toLocaleString()]}),e.jsx("p",{children:"Geriatrics Platform Pro - Shaare Zedek Medical Center"})]})]})]})})}),h.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:s==="en"?"Previous Reports":"דוחות קודמים"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:h.slice(0,10).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[a.date," - ",a.shiftType," Shift"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["By: ",a.nurseOut||"Unknown"]})]}),e.jsx("button",{onClick:()=>{l(a),u(!0)},className:"text-blue-600 hover:text-blue-800",children:s==="en"?"View":"צפה"})]},a.id))})]})]})}function As({dataSource:i,language:s}){const[n,o]=d.useState([]),[t,l]=d.useState([]),[b,u]=d.useState("week"),[h,p]=d.useState("all"),[x,j]=d.useState(!0),[m,v]=d.useState([]),[y,c]=d.useState([]),[r,w]=d.useState([]),[D,f]=d.useState([]),[k,L]=d.useState([]),[N,S]=d.useState([]);d.useEffect(()=>{M()},[i,b,h]);const M=async()=>{j(!0);try{const[g,P]=await Promise.all([i.getRoster(),i.getTasks()]);o(g),l(P),a(g,P),C(g,P)}catch(g){console.error("Failed to load analytics data:",g)}finally{j(!1)}},a=(g,P)=>{const T=g.length,_=g.filter(O=>O.acuity==="critical").length,se=g.filter(O=>O.fallRisk&&O.fallRisk>45).length,z=P.filter(O=>O.status==="completed").length,me=P.length>0?(z/P.length*100).toFixed(1):0,te=g.reduce((O,V)=>{const Se=V.mmse&&V.mmse.length>0?V.mmse[V.mmse.length-1].score:0;return O+Se},0)/(T||1),A=Math.floor(T*.95),E=((T-A)/(A||1)*100).toFixed(1);v([{label:s==="en"?"Total Patients":'סה"כ מטופלים',value:T,change:Number(E),trend:Number(E)>0?"up":Number(E)<0?"down":"stable",icon:ae,color:"blue"},{label:s==="en"?"Critical Patients":"מטופלים קריטיים",value:_,change:0,trend:"stable",icon:F,color:"red"},{label:s==="en"?"High Fall Risk":"סיכון נפילה גבוה",value:se,change:-8.3,trend:"down",icon:ce,color:"orange"},{label:s==="en"?"Task Completion":"השלמת משימות",value:`${me}%`,change:5.2,trend:"up",icon:ie,color:"green"},{label:s==="en"?"Avg MMSE Score":"ממוצע MMSE",value:te.toFixed(1),change:-2.1,trend:"down",icon:je,color:"purple"},{label:s==="en"?"Bed Occupancy":"תפוסת מיטות",value:"87%",change:3.5,trend:"up",icon:ae,color:"indigo"}])},C=(g,P)=>{const T=[];for(let A=6;A>=0;A--){const E=new Date;E.setDate(E.getDate()-A),T.push({day:E.toLocaleDateString("en",{weekday:"short"}),average:22+Math.random()*6,critical:18+Math.random()*4})}c(T);const _=[{name:s==="en"?"Low Risk":"סיכון נמוך",value:g.filter(A=>!A.fallRisk||A.fallRisk<25).length,color:"#10b981"},{name:s==="en"?"Moderate":"סיכון בינוני",value:g.filter(A=>A.fallRisk>=25&&A.fallRisk<45).length,color:"#f59e0b"},{name:s==="en"?"High Risk":"סיכון גבוה",value:g.filter(A=>A.fallRisk>=45).length,color:"#ef4444"}];w(_);const se=g.map(A=>({name:A.name.split(" ")[0],medications:A.medications?A.medications.length:0,beers:Math.floor(Math.random()*3)})).slice(0,10);f(se);const z=[];for(let A=29;A>=0;A--){const E=new Date;E.setDate(E.getDate()-A),z.push({date:E.toLocaleDateString("en",{month:"short",day:"numeric"}),admissions:Math.floor(Math.random()*5+2),discharges:Math.floor(Math.random()*4+1)})}L(z);const te=["Medication","Assessment","Therapy","Procedure","Documentation"].map(A=>({type:A,completed:Math.floor(Math.random()*20+10),pending:Math.floor(Math.random()*10+5)}));S(te)},R=()=>{const g={kpis:m,mmseData:y,fallRiskData:r,medicationData:D,exportDate:new Date().toISOString(),dateRange:b,department:h},P=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),T=URL.createObjectURL(P),_=document.createElement("a");_.href=T,_.download=`analytics-${new Date().toISOString().split("T")[0]}.json`,_.click()};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:s==="en"?"Loading analytics...":"טוען ניתוחים..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==="en"?"Analytics Dashboard":"לוח ניתוחים"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s==="en"?"Real-time insights and performance metrics":"תובנות בזמן אמת ומדדי ביצוע"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:b,onChange:g=>u(g.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"day",children:s==="en"?"Today":"היום"}),e.jsx("option",{value:"week",children:s==="en"?"This Week":"השבוע"}),e.jsx("option",{value:"month",children:s==="en"?"This Month":"החודש"}),e.jsx("option",{value:"quarter",children:s==="en"?"Quarter":"רבעון"})]}),e.jsxs("button",{onClick:R,className:"flex items-center px-3 py-2 bg-white border rounded-lg hover:bg-gray-50",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),s==="en"?"Export":"ייצוא"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:m.map((g,P)=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(g.icon,{className:`h-5 w-5 text-${g.color}-500`}),e.jsxs("span",{className:`flex items-center text-xs font-medium ${g.trend==="up"?"text-green-600":g.trend==="down"?"text-red-600":"text-gray-600"}`,children:[g.trend==="up"&&e.jsx(Ke,{className:"h-3 w-3 mr-1"}),g.trend==="down"&&e.jsx(ze,{className:"h-3 w-3 mr-1"}),Math.abs(g.change),"%"]})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:g.value}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:g.label})]},P))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"MMSE Score Trends":"מגמות ציון MMSE"}),e.jsx($,{width:"100%",height:250,children:e.jsxs(Ne,{data:y,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"day"}),e.jsx(Y,{domain:[15,30]}),e.jsx(W,{}),e.jsx(X,{}),e.jsx(ne,{type:"monotone",dataKey:"average",stroke:"#3b82f6",name:s==="en"?"Average":"ממוצע",strokeWidth:2}),e.jsx(ne,{type:"monotone",dataKey:"critical",stroke:"#ef4444",name:s==="en"?"Critical":"קריטי",strokeWidth:2})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"Fall Risk Distribution":"התפלגות סיכון נפילה"}),e.jsx($,{width:"100%",height:250,children:e.jsxs(as,{children:[e.jsx(is,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:g=>`${g.name}: ${g.value}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((g,P)=>e.jsx(rs,{fill:g.color},`cell-${P}`))}),e.jsx(W,{})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"Admissions & Discharges":"קבלות ושחרורים"}),e.jsx($,{width:"100%",height:250,children:e.jsxs(ns,{data:k.slice(-7),children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"date"}),e.jsx(Y,{}),e.jsx(W,{}),e.jsx(X,{}),e.jsx(xe,{type:"monotone",dataKey:"admissions",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:s==="en"?"Admissions":"קבלות"}),e.jsx(xe,{type:"monotone",dataKey:"discharges",stackId:"2",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.6,name:s==="en"?"Discharges":"שחרורים"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"Task Completion by Type":"השלמת משימות לפי סוג"}),e.jsx($,{width:"100%",height:250,children:e.jsxs(ls,{data:N,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"type"}),e.jsx(Y,{}),e.jsx(W,{}),e.jsx(X,{}),e.jsx(he,{dataKey:"completed",fill:"#10b981",name:s==="en"?"Completed":"הושלם"}),e.jsx(he,{dataKey:"pending",fill:"#f59e0b",name:s==="en"?"Pending":"ממתין"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s==="en"?"Medication Burden (Top 10)":"עומס תרופתי (10 המובילים)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:s==="en"?"Patient":"מטופל"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:s==="en"?"Total Medications":'סה"כ תרופות'}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:s==="en"?"Beers List":"רשימת Beers"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:s==="en"?"Risk Level":"רמת סיכון"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:D.map((g,P)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:g.name}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:g.medications}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:g.beers}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.medications>10?"bg-red-100 text-red-800":g.medications>5?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:g.medications>10?s==="en"?"High":"גבוה":g.medications>5?s==="en"?"Medium":"בינוני":s==="en"?"Low":"נמוך"})})]},P))})]})})]})]})}class Ds{constructor(){G(this,"logs",[]);G(this,"maxLogs",1e4);G(this,"storageKey","audit_logs");this.loadLogs()}loadLogs(){try{const s=localStorage.getItem(this.storageKey);s&&(this.logs=JSON.parse(s))}catch(s){console.error("Failed to load audit logs:",s)}}saveLogs(){try{this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),localStorage.setItem(this.storageKey,JSON.stringify(this.logs))}catch(s){console.error("Failed to save audit logs:",s)}}log(s){const n={...s,id:`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),ipAddress:this.getIPAddress(),userAgent:navigator.userAgent};return this.logs.push(n),this.saveLogs(),(n.severity==="critical"||n.severity==="error")&&console.error("Audit Log:",n),this.sendToBackend(n),n}getIPAddress(){return"client-ip"}async sendToBackend(s){}getLogs(s){let n=[...this.logs];return s&&(s.category&&(n=n.filter(o=>o.category===s.category)),s.severity&&(n=n.filter(o=>o.severity===s.severity)),s.userId&&(n=n.filter(o=>o.userId===s.userId)),s.startDate&&(n=n.filter(o=>o.timestamp>=s.startDate)),s.endDate&&(n=n.filter(o=>o.timestamp<=s.endDate))),n.sort((o,t)=>t.timestamp.localeCompare(o.timestamp)),s!=null&&s.limit?n.slice(0,s.limit):n}exportLogs(s="json"){if(s==="json")return JSON.stringify(this.logs,null,2);{const n=["Timestamp","User","Action","Resource","Severity","Category"],o=this.logs.map(t=>[t.timestamp,t.userName,t.action,t.resource,t.severity,t.category]);return[n.join(","),...o.map(t=>t.map(l=>`"${l}"`).join(","))].join(`
`)}}clearLogs(s){s?this.logs=this.logs.filter(n=>n.timestamp>s):this.logs=[],this.saveLogs()}logLogin(s,n,o){return this.log({userId:s,userName:n,action:o?"LOGIN_SUCCESS":"LOGIN_FAILED",resource:"Authentication",severity:o?"info":"warning",category:"auth"})}logLogout(s,n){return this.log({userId:s,userName:n,action:"LOGOUT",resource:"Authentication",severity:"info",category:"auth"})}logDataAccess(s,n,o,t){return this.log({userId:s,userName:n,action:"DATA_ACCESS",resource:o,resourceId:t,severity:"info",category:"data"})}logDataModification(s,n,o,t,l){return this.log({userId:s,userName:n,action:"DATA_MODIFIED",resource:o,resourceId:t,details:l,severity:"warning",category:"data"})}logClinicalAction(s,n,o,t,l){return this.log({userId:s,userName:n,action:o,resource:"Patient",resourceId:t,details:l,severity:"info",category:"clinical"})}logError(s,n,o,t){return this.log({userId:s,userName:n,action:"ERROR",resource:t||"System",details:{message:o.message,stack:o.stack},severity:"error",category:"system"})}logSecurityEvent(s,n,o,t){return this.log({userId:s,userName:n,action:o,resource:"Security",details:t,severity:"critical",category:"admin"})}}const B=new Ds;function Ls({language:i}){const[s,n]=d.useState([]),[o,t]=d.useState([]),[l,b]=d.useState(""),[u,h]=d.useState("all"),[p,x]=d.useState("all"),[j,m]=d.useState("all");d.useEffect(()=>{v();const f=setInterval(v,5e3);return()=>clearInterval(f)},[]),d.useEffect(()=>{y()},[s,l,u,p,j]);const v=()=>{const f=B.getLogs({limit:1e3});n(f)},y=()=>{let f=[...s];if(l){const k=l.toLowerCase();f=f.filter(L=>L.userName.toLowerCase().includes(k)||L.action.toLowerCase().includes(k)||L.resource.toLowerCase().includes(k)||L.details&&JSON.stringify(L.details).toLowerCase().includes(k))}if(u!=="all"&&(f=f.filter(k=>k.category===u)),p!=="all"&&(f=f.filter(k=>k.severity===p)),j!=="all"){const k=new Date;let L;switch(j){case"today":L=new Date(k.getFullYear(),k.getMonth(),k.getDate());break;case"week":L=new Date(k.getTime()-7*24*60*60*1e3);break;case"month":L=new Date(k.getFullYear(),k.getMonth(),1);break;default:L=new Date(0)}f=f.filter(N=>new Date(N.timestamp)>=L)}t(f)},c=()=>{const f=B.exportLogs("csv"),k=new Blob([f],{type:"text/csv"}),L=URL.createObjectURL(k),N=document.createElement("a");N.href=L,N.download=`audit-logs-${new Date().toISOString().split("T")[0]}.csv`,N.click()},r=f=>{switch(f){case"critical":return e.jsx(Ve,{className:"h-4 w-4 text-red-600"});case"error":return e.jsx(ge,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(F,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(de,{className:"h-4 w-4 text-blue-500"})}},w=f=>{switch(f){case"critical":return"bg-red-100 text-red-800";case"error":return"bg-red-50 text-red-700";case"warning":return"bg-yellow-50 text-yellow-700";default:return"bg-blue-50 text-blue-700"}},D=f=>{switch(f){case"auth":return"bg-purple-100 text-purple-800";case"clinical":return"bg-green-100 text-green-800";case"admin":return"bg-orange-100 text-orange-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(ve,{className:"h-6 w-6 mr-2 text-indigo-600"}),i==="en"?"Audit Log":"יומן ביקורת"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:i==="en"?"Track all system activities and security events":"מעקב אחר כל פעילויות המערכת ואירועי אבטחה"})]}),e.jsxs("button",{onClick:c,className:"flex items-center px-4 py-2 bg-white border rounded-lg hover:bg-gray-50",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),i==="en"?"Export CSV":"ייצוא CSV"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:l,onChange:f=>b(f.target.value),placeholder:i==="en"?"Search logs...":"חפש ביומן...",className:"w-full pl-10 pr-3 py-2 border rounded-lg text-sm"})]}),e.jsxs("select",{value:u,onChange:f=>h(f.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:i==="en"?"All Categories":"כל הקטגוריות"}),e.jsx("option",{value:"auth",children:i==="en"?"Authentication":"אימות"}),e.jsx("option",{value:"clinical",children:i==="en"?"Clinical":"קליני"}),e.jsx("option",{value:"data",children:i==="en"?"Data Access":"גישה לנתונים"}),e.jsx("option",{value:"admin",children:i==="en"?"Admin":"מנהל"}),e.jsx("option",{value:"system",children:i==="en"?"System":"מערכת"})]}),e.jsxs("select",{value:p,onChange:f=>x(f.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:i==="en"?"All Severities":"כל הרמות"}),e.jsx("option",{value:"info",children:i==="en"?"Info":"מידע"}),e.jsx("option",{value:"warning",children:i==="en"?"Warning":"אזהרה"}),e.jsx("option",{value:"error",children:i==="en"?"Error":"שגיאה"}),e.jsx("option",{value:"critical",children:i==="en"?"Critical":"קריטי"})]}),e.jsxs("select",{value:j,onChange:f=>m(f.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:i==="en"?"All Time":"כל הזמן"}),e.jsx("option",{value:"today",children:i==="en"?"Today":"היום"}),e.jsx("option",{value:"week",children:i==="en"?"Last 7 Days":"7 ימים אחרונים"}),e.jsx("option",{value:"month",children:i==="en"?"This Month":"החודש"})]}),e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:i==="en"?`${o.length} entries found`:`נמצאו ${o.length} רשומות`})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i==="en"?"Timestamp":"זמן"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i==="en"?"User":"משתמש"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i==="en"?"Action":"פעולה"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i==="en"?"Resource":"משאב"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i==="en"?"Category":"קטגוריה"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i==="en"?"Severity":"חומרה"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:i==="en"?"No audit logs found":"לא נמצאו רשומות ביקורת"})}):o.slice(0,100).map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(f.timestamp).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.userName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f.action}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[f.resource,f.resourceId&&e.jsxs("span",{className:"text-gray-500 text-xs block",children:["ID: ",f.resourceId]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(f.category)}`,children:f.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[r(f.severity),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(f.severity)}`,children:f.severity})]})})]},f.id))})]})}),o.length>100&&e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t text-sm text-gray-600 text-center",children:i==="en"?`Showing 100 of ${o.length} entries`:`מציג 100 מתוך ${o.length} רשומות`})]})]})}function Rs({onNavigate:i,language:s}){const[n,o]=d.useState(!1),[t,l]=d.useState(0),[b,u]=d.useState(!0),[h,p]=d.useState(0),x=[{id:"intro",title:s==="en"?"Welcome to Geriatrics Platform Pro":"ברוכים הבאים לפלטפורמת גריאטריה פרו",description:s==="en"?"A comprehensive solution for geriatric care management with real-time analytics and clinical tools":"פתרון מקיף לניהול טיפול גריאטרי עם ניתוחים בזמן אמת וכלים קליניים",path:"/",duration:5e3},{id:"dashboard",title:s==="en"?"Patient Dashboard":"לוח בקרת מטופלים",description:s==="en"?"Real-time view of patient roster with MMSE trends and priority tasks":"תצוגה בזמן אמת של רשימת מטופלים עם מגמות MMSE ומשימות עדיפות",path:"/",duration:7e3,action:()=>{B.logDataAccess("demo","Demo User","Patient Roster")}},{id:"analytics",title:s==="en"?"Analytics Dashboard":"לוח ניתוחים",description:s==="en"?"KPIs and metrics for data-driven decision making. Track admissions, fall risk, and medication burden":"מדדי KPI ומטריקות לקבלת החלטות מבוססת נתונים",path:"/analytics",duration:8e3,highlight:"kpi-cards"},{id:"calculators",title:s==="en"?"Clinical Calculators":"מחשבונים קליניים",description:s==="en"?"Evidence-based assessment tools including FRAIL, CHA2DS2-VASc, and Morse Fall Scale":"כלי הערכה מבוססי ראיות כולל FRAIL, CHA2DS2-VASc, וסולם נפילות Morse",path:"/calculators",duration:6e3,action:()=>{B.logClinicalAction("demo","Demo User","CALCULATOR_USE","demo-patient")}},{id:"medications",title:s==="en"?"Medication Database":"מאגר תרופות",description:s==="en"?"Comprehensive Hebrew/English medication reference with Beers Criteria warnings":"מאגר תרופות מקיף בעברית/אנגלית עם אזהרות Beers Criteria",path:"/medications",duration:7e3,highlight:"beers-warning"},{id:"handoff",title:s==="en"?"Shift Handoff System":"מערכת העברת משמרת",description:s==="en"?"Streamlined nursing shift changes with critical patient alerts and printable reports":"העברות משמרת יעילות עם התראות מטופלים קריטיים ודוחות להדפסה",path:"/handoff",duration:8e3,action:()=>{console.log("Demo Handoff:",{criticalPatients:3,fallRisk:5,medicationChanges:2})}},{id:"audit",title:s==="en"?"Audit & Compliance":"ביקורת וציות",description:s==="en"?"Complete audit trail for regulatory compliance and security monitoring":"מעקב ביקורת מלא לציות רגולטורי וניטור אבטחה",path:"/audit",duration:6e3},{id:"pwa",title:s==="en"?"Mobile & Offline Ready":"מוכן למובייל ועבודה לא מקוונת",description:s==="en"?"Install as a mobile app and work offline. All data syncs when connection returns":"התקן כאפליקציית מובייל ועבוד במצב לא מקוון. כל הנתונים מסתנכרנים בחזרה לאינטרנט",path:"/",duration:5e3,highlight:"pwa-install"},{id:"conclusion",title:s==="en"?"Thank You":"תודה",description:s==="en"?"Geriatrics Platform Pro - Improving patient care through technology":"פלטפורמת גריאטריה פרו - שיפור הטיפול במטופלים באמצעות טכנולוגיה",path:"/",duration:5e3}];d.useEffect(()=>{let c;if(n&&t<x.length){const r=x[t];i(r.path),r.action&&r.action();const w=100;let D=0;c=setInterval(()=>{D+=w,p(D/r.duration*100),D>=r.duration&&(clearInterval(c),t<x.length-1?(l(t+1),p(0)):(o(!1),l(0),p(0)))},w)}return()=>{c&&clearInterval(c)}},[n,t,x,i]);const j=()=>{o(!n),!n&&t===x.length-1&&(l(0),p(0))},m=()=>{t<x.length-1&&(l(t+1),p(0))},v=()=>{l(0),p(0),o(!1)};if(!b)return e.jsxs("button",{onClick:()=>u(!0),className:"fixed bottom-4 right-4 z-50 flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg shadow-lg hover:bg-purple-700 transition-colors",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),s==="en"?"Demo Mode":"מצב הדגמה"]});const y=x[t]||x[0];return e.jsxs("div",{className:"fixed inset-x-0 bottom-0 z-50",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-900 to-indigo-900 text-white shadow-2xl",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{children:[s==="en"?"Step":"שלב"," ",t+1,"/",x.length]}),e.jsx("span",{children:y.title})]}),e.jsx("div",{className:"w-full bg-purple-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-100",style:{width:`${h}%`}})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-1 flex items-center",children:[e.jsx(de,{className:"h-5 w-5 mr-2"}),y.title]}),e.jsx("p",{className:"text-sm text-purple-100",children:y.description})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:j,className:"flex items-center px-4 py-2 bg-white text-purple-900 rounded-lg hover:bg-purple-50 transition-colors",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),s==="en"?"Pause":"השהה"]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),s==="en"?"Play":"הפעל"]})}),e.jsx("button",{onClick:m,disabled:t>=x.length-1,className:"flex items-center px-3 py-2 bg-purple-700 rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:v,className:"flex items-center px-3 py-2 bg-purple-700 rounded-lg hover:bg-purple-600 transition-colors",children:e.jsx(re,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-purple-200",children:s==="en"?"Demo Mode Active":"מצב הדגמה פעיל"}),e.jsx("button",{onClick:()=>u(!1),className:"px-3 py-1 text-sm bg-purple-700 rounded hover:bg-purple-600 transition-colors",children:s==="en"?"Minimize":"מזער"})]})]})]}),e.jsx("div",{className:"px-6 pb-3",children:e.jsx("div",{className:"flex space-x-1",children:x.map((c,r)=>e.jsx("button",{onClick:()=>{l(r),p(0)},className:`flex-1 h-1 rounded-full transition-colors ${r===t?"bg-white":r<t?"bg-green-400":"bg-purple-700"}`,title:c.title},c.id))})})]}),y.highlight&&e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-40",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),e.jsx("div",{className:"absolute border-4 border-yellow-400 rounded-lg animate-pulse",style:{top:"100px",left:"50%",transform:"translateX(-50%)",width:"600px",height:"200px"}})]})]})}function Ps(){const[i,s]=d.useState(null),[n,o]=d.useState(null),[t,l]=d.useState(null),[b,u]=d.useState(!0),[h,p]=d.useState("en"),[x,j]=d.useState(!1),[m,v]=d.useState(!1),y=Re();d.useEffect(()=>{async function w(){try{const D=await us();await D.initialize(),o(D),D.onAuthStateChange(k=>{l(k),k&&B.logLogin(k.id,k.email||"User",!0)});const f=await ps();await f.initialize(),s(f)}catch(D){console.error("Failed to initialize:",D)}finally{u(!1)}}w()},[]);const c=async()=>{n&&t&&(B.logLogout(t.id,t.email||"User"),await n.signOut())};if(b)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!t&&n)return e.jsx(vs,{authProvider:n});const r=[{name:h==="en"?"Dashboard":"לוח בקרה",href:"/",icon:Xe},{name:h==="en"?"Calculators":"מחשבונים",href:"/calculators",icon:Qe},{name:h==="en"?"Medications":"תרופות",href:"/medications",icon:Q},{name:h==="en"?"Shift Handoff":"העברת משמרת",href:"/handoff",icon:Ze},{name:h==="en"?"Note Analyzer":"מנתח הערות",href:"/notes",icon:ye},{name:h==="en"?"Analytics":"ניתוחים",href:"/analytics",icon:es},{name:h==="en"?"Data Packs":"חבילות נתונים",href:"/packs",icon:be},{name:h==="en"?"Audit Log":"יומן ביקורת",href:"/audit",icon:ve}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`min-h-screen bg-gray-50 ${h==="he"?"rtl":"ltr"}`,dir:h==="he"?"rtl":"ltr",children:[x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>j(!1)}),e.jsx("div",{className:`fixed inset-y-0 ${h==="he"?"right-0":"left-0"} z-50 w-64 bg-white shadow-lg transform ${x?"translate-x-0":h==="he"?"translate-x-full":"-translate-x-full"} transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:h==="en"?"Geriatrics Pro":"גריאטריה פרו"}),e.jsx("button",{onClick:()=>j(!1),className:"lg:hidden",children:e.jsx(K,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-2",children:r.map(w=>e.jsxs(Pe,{to:w.href,className:"flex items-center px-3 py-2 text-sm font-medium rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>j(!1),children:[e.jsx(w.icon,{className:`h-5 w-5 ${h==="he"?"ml-3":"mr-3"}`}),w.name]},w.href))}),e.jsxs("div",{className:"border-t p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx(ue,{language:h,onToggle:p})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-gray-500",children:t==null?void 0:t.email})]}),e.jsx("button",{onClick:c,className:"p-2 text-gray-500 hover:text-gray-700",title:h==="en"?"Sign out":"התנתק",children:e.jsx(ss,{className:"h-5 w-5"})})]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsx("button",{onClick:()=>j(!0),className:"text-gray-600",children:e.jsx(ts,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:h==="en"?"Geriatrics Pro":"גריאטריה פרו"}),e.jsx(ue,{language:h,onToggle:p})]})}),e.jsx("main",{className:"p-4 lg:p-8",children:e.jsxs(Me,{children:[e.jsx(I,{path:"/",element:i?e.jsx(gs,{dataSource:i,language:h}):e.jsx("div",{children:"Loading..."})}),e.jsx(I,{path:"/calculators",element:e.jsx(ys,{language:h})}),e.jsx(I,{path:"/medications",element:e.jsx(Ss,{language:h})}),e.jsx(I,{path:"/handoff",element:i?e.jsx(Cs,{dataSource:i,language:h}):e.jsx("div",{children:"Loading..."})}),e.jsx(I,{path:"/notes",element:i?e.jsx(fs,{dataSource:i,language:h}):e.jsx("div",{children:"Loading..."})}),e.jsx(I,{path:"/analytics",element:i?e.jsx(As,{dataSource:i,language:h}):e.jsx("div",{children:"Loading..."})}),e.jsx(I,{path:"/audit",element:e.jsx(Ls,{language:h})}),e.jsx(I,{path:"/packs",element:i?e.jsx(bs,{dataSource:i,language:h}):e.jsx("div",{children:"Loading..."})}),e.jsx(I,{path:"*",element:e.jsx(Ee,{to:"/",replace:!0})})]})})]})]}),e.jsx(Ns,{}),t&&e.jsx(Rs,{onNavigate:w=>y(w),language:h})]})}function Ms(){return e.jsx(Le,{children:e.jsx(Ps,{})})}le.createRoot(document.getElementById("root")).render(e.jsx(Te.StrictMode,{children:e.jsx(Ms,{})}));

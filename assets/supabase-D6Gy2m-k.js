var l=Object.defineProperty;var d=(u,a,e)=>a in u?l(u,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[a]=e;var n=(u,a,e)=>d(u,typeof a!="symbol"?a+"":a,e);import{c as m}from"./supabase-D23GQrQo.js";import"./react-vendor-BP9ApZiI.js";class f{constructor(){n(this,"supabase");this.supabase=m(void 0,void 0)}async initialize(){}async signIn(a,e){var s,i;const{data:r,error:t}=await this.supabase.auth.signInWithPassword({email:a,password:e});if(t)throw t;return{id:r.user.id,email:r.user.email,name:((s=r.user.user_metadata)==null?void 0:s.name)||a.split("@")[0],role:((i=r.user.user_metadata)==null?void 0:i.role)||"staff"}}async signUp(a,e,r){const{data:t,error:s}=await this.supabase.auth.signUp({email:a,password:e,options:{data:{name:r,role:"staff"}}});if(s)throw s;return{id:t.user.id,email:t.user.email,name:r,role:"staff"}}async signOut(){await this.supabase.auth.signOut()}async getCurrentUser(){var e,r;const{data:{user:a}}=await this.supabase.auth.getUser();return a?{id:a.id,email:a.email,name:((e=a.user_metadata)==null?void 0:e.name)||a.email.split("@")[0],role:((r=a.user_metadata)==null?void 0:r.role)||"staff"}:null}onAuthStateChange(a){const{data:{subscription:e}}=this.supabase.auth.onAuthStateChange((r,t)=>{var s,i;t!=null&&t.user?a({id:t.user.id,email:t.user.email,name:((s=t.user.user_metadata)==null?void 0:s.name)||t.user.email.split("@")[0],role:((i=t.user.user_metadata)==null?void 0:i.role)||"staff"}):a(null)});return()=>e.unsubscribe()}}export{f as SupabaseAuth};

<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>רשימת מטופלים ופרוטוקולים — גריאטריה</title>
  <style>
    :root {
      --bg: #f6f7fb;
      --card: #fff;
      --ink: #1f2937;
      --muted: #6b7280;
      --brand: #4f46e5;
      --ok: #059669;
      --warn: #d97706;
      --bad: #b91c1c;
      --line: #e5e7eb
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Arial Hebrew", Arial, sans-serif
    }

    header {
      padding: 16px 20px;
      background: #111827;
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 3
    }

    header h1 {
      margin: 0;
      font-size: 20px
    }

    .container {
      max-width: 1000px;
      margin: 16px auto;
      padding: 0 12px
    }

    section {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 14px
    }

    h2 {
      margin: 0 0 10px 0;
      font-size: 18px
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 10px
    }

    .col-6 {
      grid-column: span 6
    }

    .col-4 {
      grid-column: span 4
    }

    .col-3 {
      grid-column: span 3
    }

    .col-12 {
      grid-column: span 12
    }

    @media(max-width:720px) {

      .col-6,
      .col-4,
      .col-3 {
        grid-column: span 12
      }
    }

    label {
      display: block;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 4px
    }

    input,
    select,
    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--line);
      border-radius: 8px;
      font-size: 15px;
      background: #fff
    }

    textarea {
      min-height: 110px
    }

    .btn {
      display: inline-block;
      background: var(--brand);
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 10px 16px;
      cursor: pointer;
      font-size: 14px
    }

    .btn.ghost {
      background: transparent;
      color: var(--brand);
      border: 1px solid var(--brand)
    }

    .btn.muted {
      background: #6b7280
    }

    .btnbar {
      display: flex;
      gap: 8px;
      flex-wrap: wrap
    }

    table {
      width: 100%;
      border-collapse: collapse
    }

    th,
    td {
      border-bottom: 1px solid var(--line);
      padding: 8px;
      text-align: right;
      font-size: 14px
    }

    tr:hover {
      background: #fafafa
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px
    }

    .ok {
      background: #ecfdf5;
      color: #059669;
      border: 1px solid #a7f3d0
    }

    .warn {
      background: #fffbeb;
      color: #d97706;
      border: 1px solid #fde68a
    }

    .bad {
      background: #fef2f2;
      color: #b91c1c;
      border: 1px solid #fecaca
    }

    .muted {
      color: #6b7280
    }

    pre {
      white-space: pre-wrap;
      background: #f8fafc;
      border: 1px solid var(--line);
      padding: 12px;
      border-radius: 8px
    }

    footer {
      color: var(--muted);
      font-size: 12px;
      text-align: center;
      padding: 24px 0
    }
  </style>
</head>

<body>
  <header>
    <h1>🏥 רשימת מטופלים ופרוטוקולים — גריאטריה</h1>
  </header>
  <div class="container">

    <!-- Patient Roster -->
    <section>
      <h2>רשימת מטופלים</h2>
      <div class="grid">
        <div class="col-3"><label>חיפוש</label><input id="search" placeholder="שם / חדר / אבחנה…"></div>
        <div class="col-9 btnbar" style="align-items:end;justify-content:flex-start">
          <button class="btn" id="btn-add">הוספת מטופל</button>
          <button class="btn ghost" id="btn-clear">ניקוי הכל (מקומי)</button>
          <span class="muted">נשמר בדפדפן בלבד (localStorage). אין להזין מזהה אמיתי.</span>
        </div>
      </div>
      <div id="form-wrap" style="display:none;margin-top:10px"></div>
      <div style="overflow:auto;margin-top:10px">
        <table>
          <thead>
            <tr>
              <th>שם</th>
              <th>גיל</th>
              <th>מין</th>
              <th>חדר</th>
              <th>תאריך קבלה</th>
              <th>אבחנה</th>
              <th>סטטוס</th>
              <th>פעולות</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </section>

    <!-- Admission -->
    <section>
      <h2>קבלה — יצירת מסמך</h2>
      <div class="muted">בחרו “בחר” ברשימה כדי למלא אוטומטית.</div>
      <div class="grid" id="adm-grid"></div>
      <div class="btnbar" style="margin-top:8px">
        <button class="btn" id="adm-generate">צור מסמך קבלה</button>
        <button class="btn ghost" id="adm-clear">ניקוי</button>
      </div>
      <pre id="adm-out" style="margin-top:10px"></pre>
    </section>

    <!-- Protocols -->
    <section>
      <h2>פרוטוקולים — 4AT / Morse / Fried</h2>
      <div id="protocols"></div>
      <button class="btn" id="proto-gen">צור סיכום פרוטוקולים</button>
      <pre id="proto-out" style="margin-top:10px"></pre>
    </section>

    <!-- Consult -->
    <section>
      <h2>תבנית ייעוץ — גריאטרי</h2>
      <textarea id="consult-text" placeholder="פרטי ייעוץ"></textarea>
      <button class="btn" id="consult-gen">צור טקסט ייעוץ</button>
      <pre id="consult-out" style="margin-top:10px"></pre>
    </section>

    <!-- Export -->
    <section>
      <h2>ייצוא והדפסה</h2>
      <div class="btnbar">
        <button class="btn" id="btn-print">הדפסה</button>
        <button class="btn muted" id="btn-json">ייצוא JSON</button>
      </div>
      <div class="muted" style="margin-top:8px"><strong>אזהרה:</strong> אין להזין מזהים אמיתיים. הנתונים מקומיים בלבד.
      </div>
    </section>

    <footer>© Shaare Zedek • לשימוש לימודי בלבד</footer>
  </div>

  <script>
    // === JS Logic ===
    // (1) LocalStorage patient roster
    // (2) Admission form auto-fill
    // (3) Protocols calculators (4AT, Morse, Fried)
    // (4) Consult template
    // (5) Export/print

    // Example patient store
    let patients = JSON.parse(localStorage.getItem("patients") || "[]");
    function save() { localStorage.setItem("patients", JSON.stringify(patients)); render(); }
    function render() {
      const q = document.getElementById("search").value.toLowerCase();
      const tb = document.getElementById("tbody");
      tb.innerHTML = "";
      patients.filter(p => Object.values(p).some(v => String(v).toLowerCase().includes(q)))
        .forEach((p, i) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `<td>${p.name}</td><td>${p.age}</td><td>${p.sex}</td><td>${p.room}</td>
      <td>${p.admission}</td><td>${p.diagnosis}</td><td>${p.status}</td>
      <td><button onclick="select(${i})">בחר</button><button onclick="del(${i})">מחק</button></td>`;
          tb.appendChild(tr);
        });
    }
    function select(i) { document.getElementById("adm-out").textContent = "שם: " + patients[i].name + "\nאבחנה: " + patients[i].diagnosis; }
    function del(i) { patients.splice(i, 1); save(); }
    document.getElementById("btn-add").onclick = function () {
      const name = prompt("שם"); if (!name) return;
      patients.push({ name, age: "", sex: "", room: "", admission: "", diagnosis: "", status: "פעיל" }); save();
    };
    document.getElementById("btn-clear").onclick = function () { if (confirm("לנקות הכל?")) { patients = []; save(); } };
    document.getElementById("search").oninput = render;
    render();

    // Admission dummy generator
    document.getElementById("adm-generate").onclick = function () {
      document.getElementById("adm-out").textContent = "מסמך קבלה לדוגמה...\n(כאן יבוא טקסט מלא)";
    };
    document.getElementById("adm-clear").onclick = function () { document.getElementById("adm-out").textContent = ""; };

    // Protocols dummy
    document.getElementById("proto-gen").onclick = function () {
      document.getElementById("proto-out").textContent = "סיכום פרוטוקולים לדוגמה...";
    };

    // Consult
    document.getElementById("consult-gen").onclick = function () {
      const txt = document.getElementById("consult-text").value;
      document.getElementById("consult-out").textContent = "ייעוץ גריאטרי:\n" + txt;
    };

    // Export
    document.getElementById("btn-print").onclick = function () { window.print(); }
    document.getElementById("btn-json").onclick = function () {
      const blob = new Blob([JSON.stringify(patients)], { type: "application/json" });
      const a = document.createElement("a"); a.href = URL.createObjectURL(blob); a.download = "geriatrics_data.json"; a.click();
    };
  </script>
</body>

</html>